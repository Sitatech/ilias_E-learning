var Dom=YAHOO.util.Dom;var Event=YAHOO.util.Event;var DDM=YAHOO.util.DragDropMgr;YAHOO.example.DDApp={init:function(){navielements=Dom.getElementsBy(function(a){return(a.className=="2col")?true:false},"div",document);for(i=0;i<navielements.length;i++){navielements[i].style.display="none"}ohorizontalquestions=Dom.getElementsBy(function(a){return(a.className=="horizontal")?true:false},"ul",document);for(num=0;num<ohorizontalquestions.length;num++){ddelements=Dom.getElementsBy(function(a){return(a.className=="ddelement")?true:false},"li",ohorizontalquestions[num]);for(i=0;i<ddelements.length;i++){new YAHOO.example.DDList(ddelements[i].id);new YAHOO.util.DDTarget(ddelements[i].id)}}this.saveOrder()},saveOrder:function(a){ohorizontalquestions=Dom.getElementsBy(function(b){return(b.className=="horizontal")?true:false},"ul",document);for(num=0;num<ohorizontalquestions.length;num++){items=Dom.getElementsBy(function(b){return(b.className=="ddelement")?true:false},"li",ohorizontalquestions[num]);resultStr="";for(i=0;i<items.length;i++){textelements=Dom.getElementsBy(function(b){return true},"span",items[i]);textStr="";for(j=0;j<textelements[0].childNodes.length;j++){if(textelements[0].childNodes[j].nodeType==1){for(k=0;k<textelements[0].childNodes[j].childNodes.length;k++){if(textelements[0].childNodes[j].childNodes[k].nodeType==3){textStr+=textelements[0].childNodes[j].childNodes[k].nodeValue}}}else{if(textelements[0].childNodes[j].nodeType==3){textStr+=textelements[0].childNodes[j].nodeValue}}}resultStr+=textStr;if(i<items.length-1){resultStr+="{::}"}}hidden=Dom.get("orderresult");hidden.value=resultStr}}};YAHOO.example.DDList=function(d,a,b){YAHOO.example.DDList.superclass.constructor.call(this,d,a,b);var c=this.getDragEl();Dom.setStyle(c,"opacity",0.67);this.goingUp=false;this.lastY=0};YAHOO.extend(YAHOO.example.DDList,YAHOO.util.DDProxy,{startDrag:function(b,d){var a=this.getDragEl();var c=this.getEl();Dom.setStyle(c,"visibility","hidden");a.innerHTML=c.innerHTML;Dom.setStyle(a,"color",Dom.getStyle(c,"color"));Dom.setStyle(a,"font-size",Dom.getStyle(c,"font-size"));Dom.setStyle(a,"font-weight",Dom.getStyle(c,"font-weight"))},endDrag:function(g){var d=this.getEl();var f=this.getDragEl();Dom.setStyle(f,"visibility","");var b=new YAHOO.util.Motion(f,{points:{to:Dom.getXY(d)}},0.2,YAHOO.util.Easing.easeOut);var c=f.id;var h=this.id;b.onComplete.subscribe(function(){Dom.setStyle(c,"visibility","hidden");Dom.setStyle(h,"visibility","")});b.animate();YAHOO.example.DDApp.saveOrder()},onDragDrop:function(c,d){if(DDM.interactionInfo.drop.length===1){var b=DDM.interactionInfo.point;var a=DDM.interactionInfo.sourceRegion}},onDrag:function(a){var b=Event.getPageY(a);if(b<this.lastY){this.goingUp=true}else{if(b>this.lastY){this.goingUp=false}}this.lastY=b},onDragOver:function(f,g){var c=this.getEl();var b=Dom.get(g);if(b.nodeName.toLowerCase()=="li"){var a=c.parentNode;var d=b.parentNode;if(this.goingUp){d.insertBefore(c,b)}else{d.insertBefore(c,b.nextSibling)}DDM.refreshCache()}}});Event.onDOMReady(YAHOO.example.DDApp.init,YAHOO.example.DDApp,true);